# Gateway Service

API Gateway для микросервисной архитектуры event management системы. Обеспечивает единую точку входа для клиентов и маршрутизацию запросов к соответствующим микросервисам.

## Особенности

- **Единая точка входа** для всех API запросов
- **JWT аутентификация** с поддержкой access/refresh токенов
- **Полнотекстовый поиск событий** через OpenSearch
- **Развитая фильтрация** событий по различным критериям
- **Пагинация** для больших наборов данных
- **CORS поддержка** для веб-приложений
- **Health check** эндпоинты для мониторинга

## Архитектура

Gateway взаимодействует с тремя микросервисами:
- **Event Service** - управление событиями и категориями (с OpenSearch для поиска)
- **Auth Service** - управление сессиями и токенами
- **User Service** - управление пользователями

## API Эндпоинты

### Аутентификация (`/auth/api/v1/auth`)
- `POST /login` - вход в систему
- `POST /refresh` - обновление access токена
- `GET /me` - информация о текущем пользователе (требует auth)
- `POST /logout` - выход из системы (требует auth)
- `POST /revoke` - отзыв сессии (требует auth)

### Пользователи (`/user/api/v1/users`)
- `POST /` - регистрация нового пользователя
- `GET /{id}` - получение пользователя по ID (требует auth)
- `PUT /{id}` - обновление пользователя (требует auth)
- `GET /` - список всех пользователей (требует admin)
- `DELETE /{id}` - удаление пользователя (требует admin)

### События (`/event/api/v1`)
- `GET /events` - список событий с фильтрацией и поиском
- `GET /events/{id}` - получение события по ID
- `POST /events/search` - расширенный поиск с фильтрами в теле запроса
- `POST /events` - создание события (требует admin)
- `PATCH /events/{id}` - обновление события (требует admin)
- `DELETE /events/{id}` - удаление события (требует admin)

### Категории (`/event/api/v1`)
- `GET /categories` - список всех категорий
- `GET /categories/{id}` - получение категории по ID
- `POST /categories` - создание категории (требует admin)
- `PATCH /categories/{id}` - обновление категории (требует admin)
- `DELETE /categories/{id}` - удаление категории (требует admin)

## Поиск и фильтрация событий

### Параметры фильтрации (GET /events)
```
category_ids=1,2,3          # Фильтр по категориям
min_price=100               # Минимальная цена
max_price=1000              # Максимальная цена
date_from=2024-01-01        # Дата начала
date_to=2024-12-31          # Дата окончания
location=Москва             # Фильтр по локации
source=official             # Фильтр по источнику
search_text=концерт         # Полнотекстовый поиск
limit=20                    # Количество на странице
offset=0                    # Смещение
include_count=true          # Включить общее количество
```

### Расширенный поиск (POST /events/search)
```json
{
  "search_text": "концерт в парке",
  "category_ids": [1, 2],
  "min_price": 500,
  "max_price": 2000,
  "date_from": "2024-01-01",
  "date_to": "2024-12-31",
  "location": "Москва",
  "limit": 20,
  "offset": 0,
  "include_count": true
}
```

## Настройка и запуск

### Требования
